<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<title>PLUMED: PLUMED Masterclass 22.8: Modelling Concentration-driven processes with PLUMED</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script>
   var redpath = "";
   
   function showPath(eg,name) {
     var i; var y = document.getElementsByName(redpath);
     for (i=0; i < y.length; i++ ) { y[i].style.color="black"; }
     var x = document.getElementsByName(name); redpath=name;
     for (i = 0; i < x.length; i++) { x[i].style.color="red"; }
     var valid="value_details_".concat(eg);
     var valueField = document.getElementById(valid);
     var dataField = document.getElementById(name);
     valueField.innerHTML = dataField.innerHTML;
   }
   function swapInput(name) {
     var btn = document.getElementById(name + "_button");
     var mydiv = document.getElementById("input_" + name);
     if( btn.textContent=="expand shortcuts" ) {
         btn.textContent = "contract shortcuts";
         var dataField = document.getElementById(name + "long");
         mydiv.innerHTML = dataField.innerHTML;
     } else if( btn.textContent=="contract shortcuts" ) {
         btn.textContent = "expand shortcuts";
         var dataField = document.getElementById(name + "short");
         mydiv.innerHTML = dataField.innerHTML;
     }
   }
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table align="center" frame="void" width="98%" cellpadding="2%">
<tbody>
<tr style="height: 30px;">
<td valign="center"> &nbsp; <img src="pigeon.png" width="120"/></td>
<td style="padding-left: 0.2em;" width="74%"> <a href="http://www.plumed.org"> <img src="logo.png" width="400" /> </td>
<td style="padding-left: 0.2em;" align="right"> <a href="../../developer-doc/html/index.html"> <img src="user-logo.png" width="180" /> </a> </td>
</tr>
</tbody>
</table>
<!--
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PLUMED
   &#160;<span id="projectnumber">2.9.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
-->
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('masterclass-22-8.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">PLUMED Masterclass 22.8: Modelling Concentration-driven processes with PLUMED </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Matteo Salvalaglio </dd></dl>
<dl class="section date"><dt>Date</dt><dd>May 20, 2022</dd></dl>
<h1><a class="anchor" id="masterclass-22-8-aims"></a>
Aims</h1>
<p>This Masterclass aims to introduce users to the tools available via PLUMED to analyze and perform simulations of concentration-driven processes such as nucleation, growth, and diffusion.</p>
<h1><a class="anchor" id="masterclass-22-8-lo"></a>
Objectives</h1>
<p>Once this Masterclass is completed, users will be able to:</p>
<ul>
<li>Write a PLUMED input file to analyze a trajectory with multicolvars.</li>
<li>Use the Depth-First-Search tools available in PLUMED to characterize clusters of atoms in an existing vapour condensation trajectory.</li>
<li>Write a PLUMED input file to analyze the condensation of a simple liquid phase from vapour. <br  />
</li>
<li>Write a PLUMED input file for CmuMD, and perform a CmuMD simulation of liquid condensation at constant driving force.</li>
<li>Write a PLUMED input file for CmuMD, and perform a CmuMD simulation to model steady-state diffusive flux across a simulation box.</li>
</ul>
<h1><a class="anchor" id="masterclass-22-08-prereq"></a>
Prerequisites</h1>
<p>We assume that you are familiar with PLUMED. However, the 2021 PLUMED Masterclass is a great place to start if you are not.</p>
<h1><a class="anchor" id="masterclass-22-8-install"></a>
Setting up the software</h1>
<p>Follow the instructions provided <a href="https://urldefense.com/v3/__https://github.com/plumed/masterclass-2022__;!!JFdNOqOXpB6UZW0!5LDzfOpI0a0QUEAXjfWbM4f1ubgf4gC-ELH4qKstVB9wJwXRDKOjaCtm52xOb0YEw5tvTtPxyw$">here</a> to install gromacs+plumed2.8 compiled with <a href="https://urldefense.com/v3/__https://github.com/mme-ucl/CmuMD__;!!JFdNOqOXpB6UZW0!5LDzfOpI0a0QUEAXjfWbM4f1ubgf4gC-ELH4qKstVB9wJwXRDKOjaCtm52xOb0YEw5sp2Fhg_A$">CmuMD</a>.</p>
<h1><a class="anchor" id="masterclass-22-8-plumed"></a>
Background Overview</h1>
<p>PLUMED facilitates the calculation of functions of atom coordinates and the introduction of bias potentials in atomistic simulations.</p>
<p>In this tutorial, we review how to use PLUMED functionalities for two complementary tasks:</p><ul>
<li>Calculating collective variables that capture processes of assembly/disassembly such as the nucleation, condensation, dissolution etc. (Ex. 1, 2)</li>
<li>Introducing biasing forces through CmuMD, a <a href="https://urldefense.com/v3/__https://aip.scitation.org/doi/abs/10.1063/1.4917200__;!!JFdNOqOXpB6UZW0!5LDzfOpI0a0QUEAXjfWbM4f1ubgf4gC-ELH4qKstVB9wJwXRDKOjaCtm52xOb0YEw5vzGbfc4A$">method</a> that mimics open-boundary conditions and allows for mitigation of finite-size effects. (Ex. 3, 4)</li>
</ul>
<h1><a class="anchor" id="masterclass-22-8-resources"></a>
Resources</h1>
<p>The data needed to complete the exercises of this Masterclass can be found on <a href="https://github.com/mme-ucl/PLUMED_MClass_22-08">GitHub</a>. You can clone this repository locally on your machine using the following command:</p>
<pre class="fragment">git clone https://github.com/mme-ucl/PLUMED_MClass_22-08 
</pre><h1><a class="anchor" id="masterclass-22-8-solution"></a>
Solution</h1>
<p>The solution of this masterclass is available on GitHub as a <a href="https://github.com/mme-ucl/PLUMED_MClass_22-08/blob/main/Solution/Solution.ipynb">jupyter notebook</a>.</p>
<h1><a class="anchor" id="masterclass-22-8-ex1"></a>
Exercise 1: analysis of a nucleation trajectory I</h1>
<p>We can start by using plumed to analyze a trajectory and identify the total number of atoms belonging to a liquid phase condensing from a supersaturated vapour in a long unbiased MD simulation.</p>
<p>To this aim, a typical choice is the implementation of a criterion inspired by the work of Ten Wolde and Frenkel: all the atoms with a threshold number of nearest neighbours larger than a threshold is considered as part of the liquid phase.</p>
<p>In PLUMED this criterion can be readily implemented using the multicolvar COORDINATIONNUMBER:</p>

<div style="width: 90%; float:left" id="value_details_eg1"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><img src="https://img.shields.io/badge/v2.9-failed-red.svg" alt="tested on v2.9" /></div><pre style="width: 97%;" class="fragment">
<span style="color:blue"># LIQUID-like atoms</span>
<b name="eg1lq" onclick='showPath("eg1","eg1lq")'>lq: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_o_o_r_d_i_n_a_t_i_o_n_n_u_m_b_e_r.html" style="color:green">COORDINATIONNUMBER</a> <div class="tooltip">SPECIES<div class="right">this keyword is used for colvars such as coordination number. <i></i></div></div>=1-10000 <div class="tooltip">SWITCH<div class="right">This keyword is used if you want to employ an alternative to the continuous switching
function defined above. <i></i></div></div>={CUBIC D_0=0.45 D_MAX=0.55}  <div class="tooltip">MORE_THAN<div class="right">calculate the number of variables more than a certain target value. <i></i></div></div>={RATIONAL R_0=5.0 D_MAX=10.0}  <span style="display:none;" id="eg1lq"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<a href="https://www.plumed.org/doc-v2.9/user-doc/html/_p_r_i_n_t.html" style="color:green">PRINT</a> <div class="tooltip">ARG<div class="right">the input for this action is the scalar output from one or more other actions. <i></i></div></div>=<b name="eg1lq">lq.morethan</b> <div class="tooltip">STRIDE<div class="right"><b>compulsory keyword ( default=1 )</b>
the frequency with which the quantities of interest should be output <i></i></div></div>=1 <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities <i></i></div></div>=nliquid.dat <span style="display:none;" id="eg1"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
</pre>
<p>The time evolution of the number of atoms in the liquid phase can be computed by analyzing the trajectory using the <a class="el" href="driver.html">driver</a> functionality (where liquid.dat is the plumed file for this analysis).</p>
<pre class="fragment">plumed driver --mf_xtc LJvap_to_liq_red.xtc --plumed liquid.dat
</pre><h2><a class="anchor" id="masterclass-22-8-ex1-own"></a>
Try on your own</h2>
<p>Using other MultiColvar keywords can you count the number of atoms on the surface of the clusters forming in this trajectory? Can you estimate how the surface to volume ratio of the droplets forming in the system changes directly within PLUMED?</p>
<h2><a class="anchor" id="masterclass-22-8-ex1-data"></a>
Available data</h2>
<p>The MD trajectory that we will analyze can be found in the folder called <code>data</code>:</p><ul>
<li><code>LJvap.gro</code>: reference conformation of 10000 LJ particles in a metastable vapour phase.</li>
<li><code>LJvap_to_liq.xtc</code>: trajectory.</li>
</ul>
<h1><a class="anchor" id="masterclass-22-8-ex2"></a>
Exercise 2: analysis of a nucleation trajectory II</h1>
<p>In certain contexts, it can be helpful to characterize the phase transition by following analyzing the population of clusters that form during the nucleation process. In PLUMED, this is possible by taking advantage of the <a class="el" href="_d_f_s_c_l_u_s_t_e_r_i_n_g.html">DFSCLUSTERING</a> algorithm, which builds on the construction of a CONTACTMATRIX to identify clusters of atoms with specific properties.</p>
<p>Here we analyse the clusters distribution emerging in the trajectory <code>LJvap_to_liq.xtc</code>, focussing on the number of clusters, and following the evolution of the four largest clusters in the system:</p>

<div style="width: 90%; float:left" id="value_details_eg2"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><img src="https://img.shields.io/badge/v2.9-failed-red.svg" alt="tested on v2.9" /></div><pre style="width: 97%;" class="fragment">
<span style="color:blue"># Identify liquid-like atoms</span>
<b name="eg2lq" onclick='showPath("eg2","eg2lq")'>lq: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_o_o_r_d_i_n_a_t_i_o_n_n_u_m_b_e_r.html" style="color:green">COORDINATIONNUMBER</a> <div class="tooltip">SPECIES<div class="right">this keyword is used for colvars such as coordination number. <i></i></div></div>=1-10000 <div class="tooltip">SWITCH<div class="right">This keyword is used if you want to employ an alternative to the continuous switching
function defined above. <i></i></div></div>={CUBIC D_0=0.45  D_MAX=0.55}  <div class="tooltip">MORE_THAN<div class="right">calculate the number of variables more than a certain target value. <i></i></div></div>={RATIONAL R_0=5.0 D_MAX=10.0}  <span style="display:none;" id="eg2lq"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># Define a contact matrix &amp; perfom DFS clustering</span>
<b name="eg2cm" onclick='showPath("eg2","eg2cm")'>cm: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_o_n_t_a_c_t__m_a_t_r_i_x.html" style="color:green">CONTACT_MATRIX</a> <div class="tooltip">ATOMS<div class="right">The list of atoms for which you would like to calculate the contact matrix. <i></i></div></div>=<b name="eg2lq">lq</b> <div class="tooltip">SWITCH<div class="right">This keyword is used if you want to employ an alternative to the continuous switching
function defined above. <i></i></div></div>={CUBIC D_0=0.45  D_MAX=0.55}  <span style="display:none;" id="eg2cm"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<b name="eg2dfs" onclick='showPath("eg2","eg2dfs")'>dfs: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_d_f_s_c_l_u_s_t_e_r_i_n_g.html" style="color:green">DFSCLUSTERING</a> <div class="tooltip">MATRIX<div class="right"><b>compulsory keyword </b>
the action that calculates the adjacency matrix vessel we would like to analyze <i></i></div></div>=<b name="eg2cm">cm</b> <span style="display:none;" id="eg2dfs"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># Compute the size of the four largest clusters</span>
<b name="eg2cluster_1" onclick='showPath("eg2","eg2cluster_1")'>cluster_1: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_l_u_s_t_e_r__n_a_t_o_m_s.html" style="color:green">CLUSTER_NATOMS</a> <div class="tooltip">CLUSTERS<div class="right"><b>compulsory keyword </b>
the label of the action that does the clustering <i></i></div></div>=<b name="eg2dfs">dfs</b> <div class="tooltip">CLUSTER<div class="right"><b>compulsory keyword ( default=1 )</b>
which cluster would you like to look at 1 is the largest cluster, 2 is the second
largest, 3 is the the third largest and so on. <i></i></div></div>=1 <span style="display:none;" id="eg2cluster_1"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<b name="eg2cluster_2" onclick='showPath("eg2","eg2cluster_2")'>cluster_2: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_l_u_s_t_e_r__n_a_t_o_m_s.html" style="color:green">CLUSTER_NATOMS</a> <div class="tooltip">CLUSTERS<div class="right"><b>compulsory keyword </b>
the label of the action that does the clustering <i></i></div></div>=<b name="eg2dfs">dfs</b> <div class="tooltip">CLUSTER<div class="right"><b>compulsory keyword ( default=1 )</b>
which cluster would you like to look at 1 is the largest cluster, 2 is the second
largest, 3 is the the third largest and so on. <i></i></div></div>=2 <span style="display:none;" id="eg2cluster_2"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<b name="eg2cluster_3" onclick='showPath("eg2","eg2cluster_3")'>cluster_3: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_l_u_s_t_e_r__n_a_t_o_m_s.html" style="color:green">CLUSTER_NATOMS</a> <div class="tooltip">CLUSTERS<div class="right"><b>compulsory keyword </b>
the label of the action that does the clustering <i></i></div></div>=<b name="eg2dfs">dfs</b> <div class="tooltip">CLUSTER<div class="right"><b>compulsory keyword ( default=1 )</b>
which cluster would you like to look at 1 is the largest cluster, 2 is the second
largest, 3 is the the third largest and so on. <i></i></div></div>=3 <span style="display:none;" id="eg2cluster_3"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<b name="eg2cluster_4" onclick='showPath("eg2","eg2cluster_4")'>cluster_4: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_l_u_s_t_e_r__n_a_t_o_m_s.html" style="color:green">CLUSTER_NATOMS</a> <div class="tooltip">CLUSTERS<div class="right"><b>compulsory keyword </b>
the label of the action that does the clustering <i></i></div></div>=<b name="eg2dfs">dfs</b> <div class="tooltip">CLUSTER<div class="right"><b>compulsory keyword ( default=1 )</b>
which cluster would you like to look at 1 is the largest cluster, 2 is the second
largest, 3 is the the third largest and so on. <i></i></div></div>=4 <span style="display:none;" id="eg2cluster_4"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># Compute the number of clusters</span>
<b name="eg2nclust" onclick='showPath("eg2","eg2nclust")'>nclust: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_l_u_s_t_e_r__d_i_s_t_r_i_b_u_t_i_o_n.html" style="color:green">CLUSTER_DISTRIBUTION</a> <div class="tooltip">CLUSTERS<div class="right"><b>compulsory keyword </b>
the label of the action that does the clustering <i></i></div></div>=<b name="eg2dfs">dfs</b> <div class="tooltip">MORE_THAN<div class="right">calculate the number of variables more than a certain target value. <i></i></div></div>={GAUSSIAN D_0=D_0=1.95 R_0=0.01 D_MAX=1.99}  <span style="display:none;" id="eg2nclust"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># PRINT to file</span>
<a href="https://www.plumed.org/doc-v2.9/user-doc/html/_p_r_i_n_t.html" style="color:green">PRINT</a> <div class="tooltip">ARG<div class="right">the input for this action is the scalar output from one or more other actions. <i></i></div></div>=<b name="eg2lq">lq.morethan</b>,<b name="eg2nclust">nclust.*</b>,<b name="eg2cluster_1">cluster_1</b>,<b name="eg2cluster_2">cluster_2</b>,<b name="eg2cluster_3">cluster_3</b>,<b name="eg2cluster_4">cluster_4</b> <div class="tooltip">STRIDE<div class="right"><b>compulsory keyword ( default=1 )</b>
the frequency with which the quantities of interest should be output <i></i></div></div>=1 <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities <i></i></div></div>=clusters.dat <span style="display:none;" id="eg2"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<a href="https://www.plumed.org/doc-v2.9/user-doc/html/_f_l_u_s_h.html" style="color:green">FLUSH</a> <div class="tooltip">STRIDE<div class="right"><b>compulsory keyword </b>
the frequency with which all the open files should be flushed <i></i></div></div>=1 <span style="display:none;" id="eg2"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
</pre>
<h2><a class="anchor" id="masterclass-22-8-ex2-own"></a>
Try on your own</h2>
<p>Modifying the setup above, can you compute the number of clusters with a size larger than 20 LJ particles?</p>
<h2><a class="anchor" id="masterclass-22-8-ex2-data"></a>
Available data</h2>
<p>The MD trajectory that we will analyze can be found in the folder called <code>data</code>:</p><ul>
<li><code>LJvap.gro</code>: reference conformation of 10000 LJ particles in a metastable vapour phase.</li>
<li><code>LJvap_to_liq.xtc</code>: trajectory.</li>
</ul>
<h1><a class="anchor" id="masterclass-22-8-ex3"></a>
Exercise 3: Steady-state diffusive flux with CmuMD</h1>
<p>In the two examples discussed in Exercises 1 and 2 it is apparent that the process of condensation reaches steady state due to finite-size effects. However, looking at the process more carefully, one can notice that the driving force leading to phase separation is far from constant. C$\mu$MD allows using PLUMED to apply ad-hoc forces and keep constant the composition of spatial regions of the simulation box called control regions. This feature allows to model processes driven by concentration in steady, out-of-equilibrium conditions.</p>
<p>The first example we will focus on is a purely diffusive process in a LJ vapour.</p>
<p>A PLUMED file that allows imposing a steady concentration difference with CmuMD looks like:</p>

<div style="width: 90%; float:left" id="value_details_eg3"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><img src="https://img.shields.io/badge/v2.9-failed-red.svg" alt="tested on v2.9" /></div><pre style="width: 97%;" class="fragment">
<span style="color:blue"># Define groups of atoms</span>
<b name="eg3LJ" onclick='showPath("eg3","eg3LJ")'>LJ: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_g_r_o_u_p.html" style="color:green">GROUP</a> <div class="tooltip">ATOMS<div class="right">the numerical indexes for the set of atoms in the group. <i></i></div></div>=1-1000:1 <span style="display:none;" id="eg3LJ"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># Provide parameters for the CV</span>
<b name="eg3left" onclick='showPath("eg3","eg3left")'>left: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_m_u_m_d.html" style="color:green">CMUMD</a> <div class="tooltip">GROUP<div class="right"><b> could not find this keyword </b><i></i></div></div>=lj <div class="tooltip">NSV<div class="right"><b> could not find this keyword </b><i></i></div></div>=1 <div class="tooltip">FIXED<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.5 <div class="tooltip">DCR<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.25 <div class="tooltip">CRSIZE<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.1 <div class="tooltip">WF<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.0001 <div class="tooltip">ASYMM<div class="right"><b> could not find this keyword </b><i></i></div></div>=-1 <div class="tooltip">NINT<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.1 <div class="tooltip">NZ<div class="right"><b> could not find this keyword </b><i></i></div></div>=291 <span style="display:none;" id="eg3left"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<b name="eg3right" onclick='showPath("eg3","eg3right")'>right: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_m_u_m_d.html" style="color:green">CMUMD</a> <div class="tooltip">GROUP<div class="right"><b> could not find this keyword </b><i></i></div></div>=lj <div class="tooltip">NSV<div class="right"><b> could not find this keyword </b><i></i></div></div>=1 <div class="tooltip">FIXED<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.5 <div class="tooltip">DCR<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.25 <div class="tooltip">CRSIZE<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.1 <div class="tooltip">WF<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.0001 <div class="tooltip">ASYMM<div class="right"><b> could not find this keyword </b><i></i></div></div>=1 <div class="tooltip">NINT<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.1 <div class="tooltip">NZ<div class="right"><b> could not find this keyword </b><i></i></div></div>=291 <span style="display:none;" id="eg3right"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># CmuMD is implemented as a restraint on the densities of species in CR</span>
<b name="eg3rleft" onclick='showPath("eg3","eg3rleft")'>rleft: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_r_e_s_t_r_a_i_n_t.html" style="color:green">RESTRAINT</a> <div class="tooltip">ARG<div class="right">the input for this action is the scalar output from one or more other actions. <i></i></div></div>=<b name="eg3left">left</b> <div class="tooltip">AT<div class="right"><b>compulsory keyword </b>
the position of the restraint <i></i></div></div>=1.4 <div class="tooltip">KAPPA<div class="right"><b>compulsory keyword ( default=0.0 )</b>
specifies that the restraint is harmonic and what the values of the force constants
on each of the variables are <i></i></div></div>=1000.0 <span style="display:none;" id="eg3rleft"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<b name="eg3rright" onclick='showPath("eg3","eg3rright")'>rright: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_r_e_s_t_r_a_i_n_t.html" style="color:green">RESTRAINT</a> <div class="tooltip">ARG<div class="right">the input for this action is the scalar output from one or more other actions. <i></i></div></div>=<b name="eg3right">right</b> <div class="tooltip">AT<div class="right"><b>compulsory keyword </b>
the position of the restraint <i></i></div></div>=0.05 <div class="tooltip">KAPPA<div class="right"><b>compulsory keyword ( default=0.0 )</b>
specifies that the restraint is harmonic and what the values of the force constants
on each of the variables are <i></i></div></div>=2000.0 <span style="display:none;" id="eg3rright"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># Report the densities and bias</span>
<a href="https://www.plumed.org/doc-v2.9/user-doc/html/_p_r_i_n_t.html" style="color:green">PRINT</a> ...
   <div class="tooltip">ARG<div class="right">the input for this action is the scalar output from one or more other actions. <i></i></div></div>=<b name="eg3left">left</b>,<b name="eg3right">right</b>,<b name="eg3rleft">rleft.bias</b>,<b name="eg3rright">rright.bias</b> 
   <div class="tooltip">STRIDE<div class="right"><b>compulsory keyword ( default=1 )</b>
the frequency with which the quantities of interest should be output <i></i></div></div>=10 
   <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities <i></i></div></div>=CMUMD_log 
...<span style="display:none;" id="eg3"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
</pre>
<p>We can run a CMUMD simulation under these conditions as:</p>
<pre class="fragment">gmx_mpi mdrun --plumed cmumd_diff.dat
</pre><h2><a class="anchor" id="masterclass-22-8-ex3-own"></a>
Try on your own</h2>
<p>Perform simulations at varying concentration differences. Compute the concentration gradient across the simulation box as a function of the concentration difference between left and right controlled volumes.</p>
<h2><a class="anchor" id="masterclass-22-8-ex3-data"></a>
Available data</h2>
<p>In the folder <code>data</code>:</p><ul>
<li><code>LJ_diffusion.gro</code>: reference conformation of 1000 LJ particles.</li>
<li><code>LJ_diffusion.xtc</code>: trajectory evolving under the effect of the stationary concentration gradient.</li>
</ul>
<h1><a class="anchor" id="masterclass-22-8-ex4"></a>
Exercise 4: Steady-state condensation process with C$\mu$MD</h1>
<p>The fourth exercise combines aspects of the previous three. We will use CmuMD to control the driving force associated with the growth of a dense phase represented by a slab at the center of a simulation box.</p>
<p>Similarly to the diffusion case the plumed file that can be used to perform this type of simulation reads:</p>

<div style="width: 90%; float:left" id="value_details_eg4"> Click on the labels of the actions for more information on what each action computes </div>
<div style="width: 10%; float:left"><img src="https://img.shields.io/badge/v2.9-failed-red.svg" alt="tested on v2.9" /></div><pre style="width: 97%;" class="fragment">
<span style="color:blue"># Define groups of atoms</span>
<b name="eg4LJ" onclick='showPath("eg4","eg4LJ")'>LJ: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_g_r_o_u_p.html" style="color:green">GROUP</a> <div class="tooltip">ATOMS<div class="right">the numerical indexes for the set of atoms in the group. <i></i></div></div>=1001-2000:1 <span style="display:none;" id="eg4LJ"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># Provide parameters for the CV</span>
<b name="eg4left" onclick='showPath("eg4","eg4left")'>left: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_m_u_m_d.html" style="color:green">CMUMD</a> <div class="tooltip">GROUP<div class="right"><b> could not find this keyword </b><i></i></div></div>=lj <div class="tooltip">NSV<div class="right"><b> could not find this keyword </b><i></i></div></div>=1 <div class="tooltip">FIXED<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.4 <div class="tooltip">DCR<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.25 <div class="tooltip">CRSIZE<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.1 <div class="tooltip">WF<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.0001 <div class="tooltip">ASYMM<div class="right"><b> could not find this keyword </b><i></i></div></div>=-1 <div class="tooltip">NINT<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.1 <div class="tooltip">NZ<div class="right"><b> could not find this keyword </b><i></i></div></div>=291 <span style="display:none;" id="eg4left"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<b name="eg4right" onclick='showPath("eg4","eg4right")'>right: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_c_m_u_m_d.html" style="color:green">CMUMD</a> <div class="tooltip">GROUP<div class="right"><b> could not find this keyword </b><i></i></div></div>=lj <div class="tooltip">NSV<div class="right"><b> could not find this keyword </b><i></i></div></div>=1 <div class="tooltip">FIXED<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.6 <div class="tooltip">DCR<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.25 <div class="tooltip">CRSIZE<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.1 <div class="tooltip">WF<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.0001 <div class="tooltip">ASYMM<div class="right"><b> could not find this keyword </b><i></i></div></div>=1 <div class="tooltip">NINT<div class="right"><b> could not find this keyword </b><i></i></div></div>=0.1 <div class="tooltip">NZ<div class="right"><b> could not find this keyword </b><i></i></div></div>=291 <span style="display:none;" id="eg4right"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># CmuMD is implemented as a restraint on the densities of species in CR</span>
<b name="eg4left" onclick='showPath("eg4","eg4left")'>left: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_r_e_s_t_r_a_i_n_t.html" style="color:green">RESTRAINT</a> <div class="tooltip">ARG<div class="right">the input for this action is the scalar output from one or more other actions. <i></i></div></div>=<b name="eg4left">left</b> <div class="tooltip">AT<div class="right"><b>compulsory keyword </b>
the position of the restraint <i></i></div></div>=3. <div class="tooltip">KAPPA<div class="right"><b>compulsory keyword ( default=0.0 )</b>
specifies that the restraint is harmonic and what the values of the force constants
on each of the variables are <i></i></div></div>=2000.0 <span style="display:none;" id="eg4left"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<b name="eg4right" onclick='showPath("eg4","eg4right")'>right: </b><a href="https://www.plumed.org/doc-v2.9/user-doc/html/_r_e_s_t_r_a_i_n_t.html" style="color:green">RESTRAINT</a> <div class="tooltip">ARG<div class="right">the input for this action is the scalar output from one or more other actions. <i></i></div></div>=<b name="eg4right">right</b> <div class="tooltip">AT<div class="right"><b>compulsory keyword </b>
the position of the restraint <i></i></div></div>=3. <div class="tooltip">KAPPA<div class="right"><b>compulsory keyword ( default=0.0 )</b>
specifies that the restraint is harmonic and what the values of the force constants
on each of the variables are <i></i></div></div>=2000.0 <span style="display:none;" id="eg4right"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
<span style="color:blue"># Report the densities and bias</span>
<a href="https://www.plumed.org/doc-v2.9/user-doc/html/_p_r_i_n_t.html" style="color:green">PRINT</a> ...
   <div class="tooltip">ARG<div class="right">the input for this action is the scalar output from one or more other actions. <i></i></div></div>=<b name="eg4left">left</b>,<b name="eg4right">right</b>,rleft.bias,rright.bias 
   <div class="tooltip">STRIDE<div class="right"><b>compulsory keyword ( default=1 )</b>
the frequency with which the quantities of interest should be output <i></i></div></div>=10 
   <div class="tooltip">FILE<div class="right">the name of the file on which to output these quantities <i></i></div></div>=CMUMD_log 
...<span style="display:none;" id="eg4"> You cannot view the components that are calculated by each action for this input file. Sorry </span>
</pre>
<h2><a class="anchor" id="masterclass-22-8-ex4-data"></a>
Available data</h2>
<p>In the folder <code>data</code>, a CmuMD trajectory ready for analysis can be found together with the gromacs input files necessary to setup and run it.</p><ul>
<li><code>LJ_slab.gro</code>: reference conformation of 1000 LJ particles.</li>
<li><code>LJ_slab.xtc</code>: trajectory evolving under the effect of the stationary concentration gradient.</li>
<li><code>md_input_LJ_slab</code>: MD input files</li>
</ul>
<h2><a class="anchor" id="masterclass-22-8-ex4-own"></a>
Try on your own</h2>
<ul>
<li>Setup and run CMUMD simulations for the LJ slab system at varying CR concentrations.</li>
<li>Use the multicolvar-based approach discussed in Ex1 to follow the condensation process. <br  />
</li>
<li>Use the graph-based approach discussed in Ex2 to follow the condensation process.</li>
<li>Monitor the density profile across the simulation box. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.3.1-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
<!--    <li class="navelem"><a class="el" href="tutorials.html">Tutorials</a></li>  -->
    <li class="footer">   <!--- Generated by -->
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
